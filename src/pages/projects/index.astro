---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import NvimLayout from '../../components/terminal/NvimLayout';

const projects = await getCollection('projects');
const sortedProjects = projects;

const projectsData = sortedProjects.map(p => ({
  slug: p.slug,
  name: p.slug,
  data: p.data,
  body: p.body
}));

const initialFile = Astro.url.searchParams.get('file') || undefined;
---

<Layout title="Projects | Brad Ash" description="Interactive terminal project explorer." fullscreen={true}>
  <NvimLayout projects={projectsData} initialFile={initialFile} client:only="react" />
</Layout>

<style is:global>
  body {
    overflow: hidden;
  }
</style>
