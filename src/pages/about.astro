---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

// Get all projects to link them to experience
const allProjects = await getCollection('projects');
const projectsByCompany = allProjects.reduce((acc, project) => {
  const company = project.data.company || 'Other';
  if (!acc[company]) acc[company] = [];
  acc[company].push({ slug: project.slug, title: project.data.title });
  return acc;
}, {} as Record<string, { slug: string; title: string }[]>);

const experience = [
  {
    company: 'Wpromote',
    role: 'VP of Engineering',
    period: '04/2024 - Present',
    highlights: [
      'Spearheaded evolution of Polaris platform into client-facing SaaS; achieved GA on schedule with 87% client adoption and 2x NPS targets',
      'Scaled engineering from 12 to 29, restructured into high-velocity squads; increased throughput 50% while achieving top eNPS (71)',
      'Executed FinOps overhaul: 20% infrastructure cost reduction, $400k/yr SaaS savings, $2.5M+ CapEx unlocked',
      'Improved data freshness 400% (24h to 5h latency), reduced production incidents 32% and bugs 17%',
      'Led technical alliances with Google, Meta, TikTok securing $550k partner funding for AI-driven features',
    ],
    projects: [] as { slug: string; title: string }[],
  },
  {
    company: 'lululemon',
    role: 'Technology Director, Cloud Platform',
    period: '02/2023 - 04/2024',
    highlights: [
      'Managed global team of 6 managers and 30 senior ICs delivering enterprise cloud platforms',
      'Delivered $6M FinOps savings in first 6 months (2x OKR) through cleanup and right-sizing',
      'Provided vision for best-in-class AWS/Azure platform services for $10B global retailer',
      'Drove compliance initiatives: SOC 2, PCI, CIS, and enterprise engineering RFCs',
    ],
    projects: projectsByCompany['lululemon'] || [],
  },
  {
    company: 'Capitol Information Group',
    role: 'Chief Technology Officer',
    period: '03/2020 - 02/2023',
    highlights: [
      'Drove innovation for 5 publishing companies (2M subscribers, $50M revenue)',
      'Led M&A due diligence, identifying data insights that paid off acquisition debt a year early',
      'Migrated high-traffic services to AWS/GCP with federated data lakehouse architecture',
    ],
    projects: projectsByCompany['Capitol Information Group'] || [],
  },
  {
    company: 'Capitol Information Group',
    role: 'Director of Engineering',
    period: '09/2017 - 03/2020',
    highlights: [
      'Increased online sales 20% annually via new upsell/cross-sell checkout flows',
      'Doubled engineering headcount and established dedicated data engineering function',
      'Led 5-year roadmap to deprecate legacy monoliths in favor of microservices',
    ],
    projects: [],
  },
  {
    company: 'Capitol Information Group',
    role: 'Software Engineer → Engineering Manager',
    period: '05/2006 - 09/2017',
    highlights: [
      'Promoted through ranks based on performance, leading adoption of open-source infrastructure, SDLC automation, TDD, and custom SaaS solutions',
    ],
    projects: [],
  },
];

const startups = [
  {
    company: 'Fruitful Fertility',
    role: 'Co-Founder / CTO',
    period: '11/2016 - 04/2021',
    description: 'Built algorithmic matching engine (10k users), secured $100k pre-seed. Pivoted B2B to B2C during pandemic before exit.',
  },
  {
    company: 'Baton Investing',
    role: 'Founder / Principal Engineer',
    period: '05/2014 - 10/2016',
    description: 'Incubated FinTech spin-off using Lean Startup methodology; maintained positive cost-to-revenue ratios.',
  },
];

const testimonials = [
  {
    quote: "Brad is one of the best leaders I've had the pleasure to work with. He combines deep technical expertise with genuine care for his team's growth. His ability to see both the forest and the trees is exceptional.",
    author: "Engineering Director",
    company: "Former Direct Report",
  },
  {
    quote: "Working with Brad transformed how our team approached complex problems. He brings clarity to chaos and always finds a way to make things work, even under tight deadlines.",
    author: "Product Manager",
    company: "Cross-functional Partner",
  },
  {
    quote: "Brad's technical vision and execution are top-notch. He successfully navigated our team through a major platform migration while keeping morale high and delivery on track.",
    author: "VP of Product",
    company: "Executive Peer",
  },
];

const currentlyExploring = [
  { area: 'AI/ML Engineering', description: 'Building agentic systems with LLMs, RAG architectures, and multi-modal AI applications' },
  { area: 'Rust & Systems Programming', description: 'High-performance backend services and CLI tooling' },
  { area: 'Platform Engineering', description: 'Internal developer platforms, golden paths, and DevEx optimization' },
  { area: 'Fractional/Advisory Roles', description: 'Helping startups scale their engineering organizations and technical strategy' },
];

const certifications = [
  { name: 'AWS Solutions Architect Associate', issuer: 'Amazon Web Services', year: '2023' },
  { name: 'Azure Administrator Associate', issuer: 'Microsoft', year: '2023' },
  { name: 'Terraform Associate', issuer: 'HashiCorp', year: '2024' },
  { name: 'SnowPro Core', issuer: 'Snowflake', year: '2023' },
];

const skills = {
  leadership: ['FinOps', 'Distributed Teams', 'Product Development', 'M&A Due Diligence', 'Governance & Compliance', 'Agile Transformation', 'Vendor Management'],
  cloud: ['AWS', 'Azure', 'GCP', 'Kubernetes', 'Docker', 'Terraform', 'Serverless', 'Argo CD', 'GitOps'],
  data: ['Snowflake', 'Databricks', 'BigQuery', 'PostgreSQL', 'Redis', 'Kafka', 'Airflow', 'dbt', 'Looker'],
  ai: ['Ray', 'MLFlow', 'Vertex AI', 'Bedrock', 'OpenAI', 'Anthropic', 'Gemini', 'Agent Frameworks'],
  languages: ['Python', 'Go', 'TypeScript', 'Node.js', 'React', 'Java', 'PHP', 'Ruby'],
};

const values = [
  { title: 'Engineering Excellence', description: 'Building systems that scale, with clean architecture and thoughtful design.' },
  { title: 'Team Growth', description: 'Mentoring engineers from junior to lead, fostering a culture of continuous learning.' },
  { title: 'Strategic Thinking', description: 'Bridging technical decisions with business outcomes, seeing the bigger picture.' },
  { title: 'Pragmatic Solutions', description: 'Choosing the right tool for the job, not the newest or shiniest.' },
];

const community = [
  'Eagle Scout & Order of the Arrow',
  'Ward 7 Neighborhood President',
  'lululemon DEI Council',
];

const strengths = ['Achiever', 'Command', 'Focus', 'Futuristic', 'Woo'];

// Timeline data for visualization - using hex colors for inline styles
const timelineData = [
  { year: 2006, company: 'CIG', role: 'Engineer', color: '#8bd5ca' },      // teal
  { year: 2014, company: 'Baton', role: 'Founder', color: '#f5a97f' },     // peach
  { year: 2016, company: 'Fruitful', role: 'CTO', color: '#f5bde6' },      // pink
  { year: 2017, company: 'CIG', role: 'Director', color: '#8bd5ca' },      // teal
  { year: 2020, company: 'CIG', role: 'CTO', color: '#8bd5ca' },           // teal
  { year: 2023, company: 'lululemon', role: 'Director', color: '#ed8796' }, // red
  { year: 2024, company: 'Wpromote', role: 'VP Eng', color: '#8aadf4' },   // blue
];

// SEO metadata
const title = "About Brad Ash | VP of Engineering & Technology Executive";
const description = "Strategic technology executive with 20+ years scaling engineering teams, driving FinOps savings, and leading digital transformation. Expert in cloud platforms, AI/ML, and high-velocity engineering cultures.";
const canonicalURL = new URL('/about', Astro.site || 'https://bradash.dev');
---

<Layout title={title}>
  <Fragment slot="head">
    <!-- SEO Meta Tags -->
    <meta name="description" content={description} />
    <meta name="author" content="Brad Ash" />
    <link rel="canonical" href={canonicalURL.toString()} />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="profile" />
    <meta property="og:url" content={canonicalURL.toString()} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:site_name" content="Brad Ash Portfolio" />
    <meta property="profile:first_name" content="Brad" />
    <meta property="profile:last_name" content="Ash" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={canonicalURL.toString()} />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    
    <!-- Additional SEO -->
    <meta name="keywords" content="VP Engineering, CTO, Technology Executive, Cloud Platform, FinOps, Engineering Leadership, Digital Transformation, AWS, Azure, Kubernetes" />
    <meta name="robots" content="index, follow" />
  </Fragment>

  <div class="max-w-4xl mx-auto px-4 py-8 md:px-6 md:py-16">
    <!-- Terminal-style header -->
    <div class="mb-12">
      <div class="flex items-center gap-2 text-ctp-subtext0 text-sm mb-2 font-mono">
        <span class="text-ctp-green">~</span>
        <span>/about</span>
      </div>
      <h1 class="text-3xl md:text-4xl font-bold text-ctp-text mb-4">About Me</h1>
      <p class="text-ctp-subtext1 text-base md:text-lg leading-relaxed">
        Strategic technology executive and solution architect with 20+ years of experience scaling engineering organizations, 
        driving efficiency, optimizing costs, and leading digital transformation. Expert in bridging the gap between technical 
        execution and business strategy, with a proven track record of building high-velocity, inspired cultures (eNPS 71), 
        unlocking delivery throughput, and architecting enterprise-grade software platforms.
      </p>
    </div>

    <!-- Interactive Career Timeline -->
    <section class="mb-12">
      <h2 class="text-xl md:text-2xl font-semibold text-ctp-mauve mb-6 flex items-center gap-2">
        <span class="text-ctp-green font-mono text-sm">##</span>
        Career Journey
      </h2>
      <div class="relative">
        <!-- Timeline bar -->
        <div class="absolute top-6 left-0 right-0 h-1 bg-ctp-surface1 rounded-full"></div>
        
        <!-- Timeline points -->
        <div class="relative flex justify-between items-start px-2">
          {timelineData.map((item, index) => (
            <div class="flex flex-col items-center group cursor-pointer" style={`z-index: ${10 - index}`}>
              <div class={`w-4 h-4 rounded-full border-2 border-ctp-base shadow-lg transition-transform group-hover:scale-125 relative z-10`} style={`background-color: ${item.color}; z-index: ${10 - index}`}></div>
              <div class="mt-3 text-center opacity-0 group-hover:opacity-100 transition-opacity absolute top-8 -translate-x-1/2 left-1/2 bg-ctp-surface0 border border-ctp-surface1 rounded-lg p-2 shadow-xl min-w-[100px]">
                <p class="text-ctp-text font-medium text-sm">{item.company}</p>
                <p class="text-ctp-subtext0 text-xs">{item.role}</p>
                <p class="text-ctp-overlay0 text-xs">{item.year}</p>
              </div>
              <span class="mt-2 text-xs text-ctp-overlay0 font-mono">{String(item.year).slice(-2)}</span>
            </div>
          ))}
        </div>
      </div>
      <p class="text-ctp-subtext0 text-xs text-center mt-8 italic">Hover over points to see details</p>
    </section>

    <!-- Currently Exploring -->
    <section class="mb-12">
      <h2 class="text-xl md:text-2xl font-semibold text-ctp-mauve mb-6 flex items-center gap-2">
        <span class="text-ctp-green font-mono text-sm">##</span>
        Currently Exploring
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        {currentlyExploring.map((item) => (
          <div class="p-4 rounded-lg bg-gradient-to-br from-ctp-surface0/50 to-ctp-surface0/20 border border-ctp-surface1 hover:border-ctp-lavender transition-all hover:shadow-lg">
            <h3 class="text-ctp-lavender font-medium mb-2 flex items-center gap-2">
              <span class="text-ctp-green">▸</span>
              {item.area}
            </h3>
            <p class="text-ctp-subtext0 text-sm">{item.description}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- Philosophy Section -->
    <section class="mb-12">
      <h2 class="text-xl md:text-2xl font-semibold text-ctp-mauve mb-6 flex items-center gap-2">
        <span class="text-ctp-green font-mono text-sm">##</span>
        Philosophy
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        {values.map((value) => (
          <div class="p-4 rounded-lg bg-ctp-surface0/30 border border-ctp-surface1 hover:border-ctp-surface2 transition-colors">
            <h3 class="text-ctp-peach font-medium mb-2">{value.title}</h3>
            <p class="text-ctp-subtext0 text-sm">{value.description}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- Experience Timeline -->
    <section class="mb-12">
      <h2 class="text-xl md:text-2xl font-semibold text-ctp-mauve mb-6 flex items-center gap-2">
        <span class="text-ctp-green font-mono text-sm">##</span>
        Experience
      </h2>
      <div class="space-y-6">
        {experience.map((exp) => (
          <div class="p-4 rounded-lg bg-ctp-surface0/30 border border-ctp-surface1">
            <div class="flex flex-col md:flex-row md:items-baseline justify-between gap-1 md:gap-2 mb-2">
              <div>
                <h3 class="text-ctp-text font-medium text-lg">{exp.role}</h3>
                <p class="text-ctp-blue">{exp.company}</p>
              </div>
              <span class="text-ctp-subtext0 text-sm font-mono">{exp.period}</span>
            </div>
            {exp.highlights && (
              <ul class="mt-3 space-y-1">
                {exp.highlights.map((highlight) => (
                  <li class="text-ctp-subtext0 text-sm flex gap-2">
                    <span class="text-ctp-green shrink-0">▪</span>
                    <span>{highlight}</span>
                  </li>
                ))}
              </ul>
            )}
            {exp.projects && exp.projects.length > 0 && (
              <div class="mt-4 pt-3 border-t border-ctp-surface1">
                <p class="text-ctp-overlay1 text-xs mb-2">Related Projects:</p>
                <div class="flex flex-wrap gap-2">
                  {exp.projects.slice(0, 5).map((project) => (
                    <a 
                      href={`/projects/${project.slug}`}
                      class="text-xs px-2 py-1 rounded bg-ctp-surface1 text-ctp-lavender hover:bg-ctp-surface2 hover:text-ctp-text transition-colors"
                    >
                      {project.title}
                    </a>
                  ))}
                  {exp.projects.length > 5 && (
                    <a 
                      href="/projects"
                      class="text-xs px-2 py-1 rounded bg-ctp-surface1 text-ctp-overlay0 hover:bg-ctp-surface2 transition-colors"
                    >
                      +{exp.projects.length - 5} more
                    </a>
                  )}
                </div>
              </div>
            )}
          </div>
        ))}
      </div>
    </section>

    <!-- Startups -->
    <section class="mb-12">
      <h2 class="text-xl md:text-2xl font-semibold text-ctp-mauve mb-6 flex items-center gap-2">
        <span class="text-ctp-green font-mono text-sm">##</span>
        Startups
      </h2>
      <div class="space-y-4">
        {startups.map((startup) => (
          <div class="p-4 rounded-lg bg-ctp-surface0/30 border border-ctp-surface1">
            <div class="flex flex-col md:flex-row md:items-baseline justify-between gap-1 md:gap-2 mb-2">
              <div>
                <h3 class="text-ctp-text font-medium">{startup.role}</h3>
                <p class="text-ctp-blue">{startup.company}</p>
              </div>
              <span class="text-ctp-subtext0 text-sm font-mono">{startup.period}</span>
            </div>
            <p class="text-ctp-subtext0 text-sm">{startup.description}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- Testimonials -->
    <section class="mb-12">
      <h2 class="text-xl md:text-2xl font-semibold text-ctp-mauve mb-6 flex items-center gap-2">
        <span class="text-ctp-green font-mono text-sm">##</span>
        What People Say
      </h2>
      <div class="grid grid-cols-1 gap-4">
        {testimonials.map((testimonial) => (
          <div class="p-5 rounded-lg bg-ctp-surface0/30 border border-ctp-surface1 hover:border-ctp-surface2 transition-colors relative">
            <span class="absolute -top-3 left-4 text-4xl text-ctp-surface2 font-serif">"</span>
            <blockquote class="text-ctp-subtext1 text-sm md:text-base italic leading-relaxed mb-3 pl-4">
              {testimonial.quote}
            </blockquote>
            <div class="flex items-center gap-2 pl-4">
              <div class="w-8 h-8 rounded-full bg-ctp-surface1 flex items-center justify-center text-ctp-overlay0 text-xs">
                {testimonial.author.split(' ').map(n => n[0]).join('')}
              </div>
              <div>
                <p class="text-ctp-text text-sm font-medium">{testimonial.author}</p>
                <p class="text-ctp-overlay0 text-xs">{testimonial.company}</p>
              </div>
            </div>
          </div>
        ))}
      </div>
      <p class="text-ctp-overlay0 text-xs mt-4 text-center italic">
        Connect on <a href="https://linkedin.com/in/bradash" class="text-ctp-blue hover:underline" target="_blank" rel="noopener noreferrer">LinkedIn</a> to see full recommendations
      </p>
    </section>

    <!-- Skills -->
    <section class="mb-12">
      <h2 class="text-xl md:text-2xl font-semibold text-ctp-mauve mb-6 flex items-center gap-2">
        <span class="text-ctp-green font-mono text-sm">##</span>
        Skills & Technologies
      </h2>
      <div class="space-y-4">
        <div class="p-4 rounded-lg bg-ctp-surface0/30 border border-ctp-surface1">
          <h3 class="text-ctp-peach font-medium text-sm mb-2">Strategic Leadership</h3>
          <div class="flex flex-wrap gap-2">
            {skills.leadership.map((skill) => (
              <span class="px-2 py-1 text-xs rounded bg-ctp-surface1 text-ctp-text">{skill}</span>
            ))}
          </div>
        </div>
        <div class="p-4 rounded-lg bg-ctp-surface0/30 border border-ctp-surface1">
          <h3 class="text-ctp-peach font-medium text-sm mb-2">Cloud & Infrastructure</h3>
          <div class="flex flex-wrap gap-2">
            {skills.cloud.map((skill) => (
              <span class="px-2 py-1 text-xs rounded bg-ctp-surface1 text-ctp-text">{skill}</span>
            ))}
          </div>
        </div>
        <div class="p-4 rounded-lg bg-ctp-surface0/30 border border-ctp-surface1">
          <h3 class="text-ctp-peach font-medium text-sm mb-2">Data & Analytics</h3>
          <div class="flex flex-wrap gap-2">
            {skills.data.map((skill) => (
              <span class="px-2 py-1 text-xs rounded bg-ctp-surface1 text-ctp-text">{skill}</span>
            ))}
          </div>
        </div>
        <div class="p-4 rounded-lg bg-ctp-surface0/30 border border-ctp-surface1">
          <h3 class="text-ctp-peach font-medium text-sm mb-2">AI & ML</h3>
          <div class="flex flex-wrap gap-2">
            {skills.ai.map((skill) => (
              <span class="px-2 py-1 text-xs rounded bg-ctp-surface1 text-ctp-text">{skill}</span>
            ))}
          </div>
        </div>
        <div class="p-4 rounded-lg bg-ctp-surface0/30 border border-ctp-surface1">
          <h3 class="text-ctp-peach font-medium text-sm mb-2">Languages & Frameworks</h3>
          <div class="flex flex-wrap gap-2">
            {skills.languages.map((skill) => (
              <span class="px-2 py-1 text-xs rounded bg-ctp-surface1 text-ctp-text">{skill}</span>
            ))}
          </div>
        </div>
      </div>
    </section>

    <!-- Certifications -->
    <section class="mb-12">
      <h2 class="text-xl md:text-2xl font-semibold text-ctp-mauve mb-6 flex items-center gap-2">
        <span class="text-ctp-green font-mono text-sm">##</span>
        Certifications
      </h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
        {certifications.map((cert) => (
          <div class="p-3 rounded-lg bg-ctp-surface0/30 border border-ctp-surface1 hover:border-ctp-surface2 transition-colors">
            <p class="text-ctp-text text-sm font-medium">{cert.name}</p>
            <p class="text-ctp-subtext0 text-xs">{cert.issuer} · {cert.year}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- Education -->
    <section class="mb-12">
      <h2 class="text-xl md:text-2xl font-semibold text-ctp-mauve mb-6 flex items-center gap-2">
        <span class="text-ctp-green font-mono text-sm">##</span>
        Education
      </h2>
      <div class="p-4 rounded-lg bg-ctp-surface0/30 border border-ctp-surface1">
        <h3 class="text-ctp-text font-medium">B.S. Computer Science + UI</h3>
        <p class="text-ctp-blue">Rensselaer Polytechnic Institute</p>
        <p class="text-ctp-subtext0 text-sm">Troy, NY</p>
      </div>
    </section>

    <!-- Community & Profile -->
    <section class="mb-12">
      <h2 class="text-xl md:text-2xl font-semibold text-ctp-mauve mb-6 flex items-center gap-2">
        <span class="text-ctp-green font-mono text-sm">##</span>
        Community & Leadership
      </h2>
      <div class="p-4 rounded-lg bg-ctp-surface0/30 border border-ctp-surface1">
        <div class="flex flex-wrap gap-2 mb-4">
          {community.map((item) => (
            <span class="px-2 py-1 text-xs rounded bg-ctp-surface1 text-ctp-text">{item}</span>
          ))}
        </div>
        <div>
          <p class="text-ctp-subtext0 text-sm mb-1">StrengthsFinder:</p>
          <div class="flex flex-wrap gap-2">
            {strengths.map((strength) => (
              <span class="px-2 py-1 text-xs rounded bg-ctp-mauve/20 text-ctp-mauve">{strength}</span>
            ))}
          </div>
        </div>
      </div>
    </section>

    <!-- Call to Action -->
    <section class="text-center py-8 border-t border-ctp-surface1">
      <p class="text-ctp-subtext1 mb-4">Interested in working together?</p>
      <div class="flex justify-center gap-4">
        <a 
          href="/brad_ash_resume.pdf" 
          download
          class="px-4 py-2 rounded-lg bg-ctp-blue text-ctp-base font-medium hover:bg-ctp-sapphire transition-colors"
        >
          Download Resume
        </a>
      </div>
    </section>
  </div>
</Layout>
